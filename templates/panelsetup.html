{% extends 'background.html' %}
{% block content %}
{{ components.showPanelsModal() }}
<script>
    const PanelsetupPagePopup = document.getElementById('panel-page-popup');
    const overlay = document.getElementById('overlay');
    const closeButtons = document.querySelectorAll('.close-btn');

    const doneSetupSolarButtons = document.querySelectorAll('.donesetsolar-btn');
    const tariffPagePopup = document.getElementById('tariff-page-popup');
    const panelSetupPagePopup = document.getElementById('panelsetup-page-popup'); // Assuming the correct ID for the other popup

    doneSetupSolarButtons.forEach(button => {
        button.onclick = function() {
            tariffPagePopup.style.display = 'block';
            overlay.style.display = 'block';
            PanelsetupPagePopup.style.display = 'none';
            setupPagePopup.style.display = 'none';
        };
    });


      // Select all .solarpaneldiv elements
      const solarPanels = document.querySelectorAll('.solarpaneldiv');

      // Loop through each .solarpaneldiv
      solarPanels.forEach(panel => {
          // Find the switch and target text elements within each panel
          const solarSwitch = panel.querySelector('.solarSwitch');
          const wattCapacityText = panel.querySelector('#wattcap p:nth-child(1)');
          const efficiencyText = panel.querySelector('#efficiency #wattcap p:nth-child(1)');
          const optimalTempText = panel.querySelector('#tempt #wattcap p:nth-child(1)');

          // Add event listener to toggle color on switch change
          solarSwitch.addEventListener('change', () => {
              const color = solarSwitch.checked ? '#30B938' : ''; // Set color when checked, reset when unchecked
              wattCapacityText.style.color = color;
              efficiencyText.style.color = color;
              optimalTempText.style.color = color;
          });
      });
        
    document.addEventListener('DOMContentLoaded', () => {
        const solarpanelDivs = document.querySelectorAll('.solarpaneldiv');
        const solarSwitches = document.querySelectorAll('.solarSwitch');
        
        // Set initial height and hide .bottom on page load
        solarpanelDivs.forEach(div => {
            div.style.height = '100%';
        });

        // Toggle height and visibility of .bottom when the switch is changed
        solarSwitches.forEach((switchElement, index) => {
            switchElement.addEventListener('change', () => {
                const panelDiv = solarpanelDivs[index];
                if (switchElement.checked) {
                    panelDiv.style.height = '131%';
                    panelDiv.classList.add('show'); // Show .bottom
                } else {
                    panelDiv.style.height = '100%';
                    panelDiv.classList.remove('show'); // Hide .bottom
                }
            });
        });
    });
    function increaseQuantity(quantity) {
      const quantityInput = document.getElementById(quantity);
      let currentQuantity = parseInt(quantityInput.value, 10);
      quantityInput.value = currentQuantity + 1;
    }
    function decreaseQuantity(quantity) {
        const quantityInput = document.getElementById(quantity);
        let currentQuantity = parseInt(quantityInput.value, 10);
        
        if (currentQuantity > 0) {
            quantityInput.value = currentQuantity - 1;
        }
    }
</script>
{% endblock %}